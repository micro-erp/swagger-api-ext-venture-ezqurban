# Webhooks

## Overview
**X-Signature** is generated by using **Secret Key**. Raw body of the request is hashed with HMAC-SHA256 and your registered webhook application's **Secret Key** will be your salt/key.
The request endpoint should return status code **200** and there will be 3 retries after the first request if it is return other than **200**. The interval between call is 1 minute.

## Events
### Order event triggers

| Event Name | Description |
| --- | --- |
| `order_marketplace.confirmed` | Order payment is confirmed by EZQ Venture|
| `order.processing` | Order item is being process (assigning order to animal) |
| `order.submitted` | Order's animal is submitted to slaughterhouse |
| `order.executed` | Order's animal execution time is confirmed |
| `order.completed` | Order status completed with time and location are confirmed |

sample headers:
```
"x-signature": "<<hashed-raw-body>>"
```

sample body:
```
{
  "event": "order_marketplace.confirmed",
  "data": {
    "id": 0,
    "slugId": "string",
    "totalPrice": 0,
    "totalPayable": 0,
    "currency": "MYR",
    "status": "pending_payment",
    "isPaid": true,
    "paidAt": "2023-10-27T11:04:27.763Z",
    "isConfirmed": true,
    "confirmedAt": "2023-10-27T11:04:27.763Z",
    "createdAt": "2023-10-27T11:04:27.763Z",
    "notes": "string",
    "referenceId": "0472e03b-2f5c-44a1-bbad-fc463a81c14f",
    "buyer": {
      "name": "string",
      "email": "string",
      "phoneNumber": "string"
    },
    "items": [
      {
        "item": {
          "id": 0,
          "slugId": "string",
          "status": "pending_payment"
        },
        "package": {
          "id": 0,
          "slugId": "string",
          "name": "string",
          "quantity": 0,
          "image": "string"
        },
        "additionalInfo": {
          "categoryIds": "string",
          "executionCountry": "string",
          "executionLocation": "string",
          "executionDate": "string",
          "executionHijriDate": "string",
          "participantName": "string"
        },
        "shippingAddress": {
          "name": "string",
          "email": "string",
          "phoneNumber": "string",
          "addressLine1": "string",
          "addressLine2": "string",
          "addressLine3": "string",
          "postcode": "string",
          "city": "string",
          "state": "string",
          "country": "string"
        },
        "histories": [
          {
            "status": "string",
            "createdAt": "2023-10-27T11:03:07.854Z"
          }
        ]
      }
    ],
    "payment": {
      "slugId": "1-byq2lz",
      "totalAmount": 0,
      "totalPaid": 0,
      "currency": "MYR",
      "transactions": [
        {
          "orderSlugId": "string",
          "paidAmount": 0,
          "paidAt": "2023-10-27T11:04:27.763Z",
          "currency": "MYR",
          "paymentMethod": "BANK_TRANSFER",
          "referenceNumber": "string",
          "remarks": "string"
        }
      ]
    }
  }
}
```
